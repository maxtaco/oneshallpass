function key_data(a){var b=[a.email,a.passphrase,a.domain,a.generation,a.secbits],c=b.join(";");a.key=c}function fnDeSelect(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function fnSelect(a){fnDeSelect();if(document.selection){var b=document.body.createTextRange();b.moveToElementText(a),b.select()}else if(window.getSelection){var b=document.createRange();b.selectNode(a),window.getSelection().addRange(b)}}function select_pw(a){var b=document.getElementById("generated_pw").firstChild;fnSelect(b)}function format_pw(a){var b=a.slice(0,display_prefs.length);return b=add_syms(b,display_prefs.nsym),b}function finish_compute(a){a.computing=!1,context.key=null,toggle_computed();var b=document.getElementById("generated_pw").firstChild;b.nodeValue=format_pw(a.generated_pw)}function do_compute_loop(a,b){var c=b,d=10;a==context.key&&(pwgen(b,d,context)?finish_compute(b):setTimeout(function(){do_compute_loop(a,c)},0))}function do_compute(a){toggle_computing();var b=a.key,c=cache[b];c||(cache[b]=a,c=a),c.generated_pw?finish_compute(c):c.computing||(context.key=b,c.computing=!0,c.iter=0,do_compute_loop(b,c))}function toggle_computing(){document.getElementById("result-need-input").style.visibility="hidden",document.getElementById("result-computing").style.visibility="visible",document.getElementById("result-computed").style.visibility="hidden",document.getElementById("select").style.visibility="hidden"}function toggle_computed(){document.getElementById("result-need-input").style.visibility="hidden",document.getElementById("result-computed").style.visibility="visible",document.getElementById("select").style.visibility="visible",document.getElementById("result-computing").style.visibility="hidden"}function swizzle(a){var b=a.srcElement;b.value.length>0&&(inputs[b.id]=1);if(inputs.passphrase&&inputs.domain&&inputs.email&&inputs.generation){var c={},d=["passphrase","domain","email","generation","secbits"],e;for(e=0;e<d.length;e++){var f=d[e],g=document.getElementById(f).value;c[f]=g}display_prefs.length=document.getElementById("length").value,display_prefs.nsym=document.getElementById("nsym").value,key_data(c),do_compute(c)}return 0}function acceptFocus(a){var b=a.srcElement;b.className.match("input-black")||(a.srcElement.className+=" input-black",a.srcElement.value="")}var inputs={},cache={},context={attempt:1,running:0,key:null},display_prefs={};